---
aid: 4194
cid: 13
authorID: 3615
addTime: 2020-04-10T01:30:00.000Z
title: 建议2049增加doh功能
tags:
    - '2049'
    - doh
    - 功能
    - 建议
    - 增加
comments: []
date: 2020-04-10T01:30:00.000Z
category: 站务
---

服务端，router.go增加一个dns-query的路由

处理方法是把收到的doh请求转发给1.1.1.1,再把应答返回。

* * *

客户端，写个Python脚本，转发doh请求给2049

拓扑图

Firefox通过doh请求127.0.0.1（Python实现的doh转发）

Python实现的doh转发程序 发给 2049

2049 转发给 1.1.1.1

再原路返回

* * *

因为doh请求都是sni，所以需要本地Python转成esni

目标是把2049的txt record写死到Python脚本里
